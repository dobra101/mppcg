This folder contains two modified Tcl files from the 'fdr' library of the FDR2 tool: fdrBatch.tcl and fdrDirect.tcl. 
Both are needed if you want to use the FDR2 tool in batch modus for checking a single assertion from a specific CSP file. 
In the FDR2 directory in the 'lib' subdirectory you can find the following libraries: 'fdr', 'html', 'tcl', 'tix' and 'tk'.
For "installing" this patch in your FDR2 tool you just have to replace the fdrBatch.tcl and fdrDirect.tcl files in the 
'fdr/' directory/library with the modified versions of these files from this directory (fdr2Patch). After you restart your console you 
can use fdr2 in Batch modus with the -singleAssertion extension like this:

fdr2 batch -singleAssertion "Refinement P FD Q" $src_file

Remember to execute the assertion in the upper example, P and Q must be processes defined as such in the correspoding 
Csp Specification $src_file and the assertion P [FD= Q don't have to exist in the CSP file. Important is the syntax for giving
an assertion that have to be checked after the -singleAssertion flag. Here is a brief explanation of the syntax for
checking different assertions from the command line:

1. Refinement Assertion:

'Refinement' followed by a Process P, a Refinement-Model (T, F or FD) and a Process Q that possibly refines P.
The three possible entries of refinement assertions between two processes P and Q after the -singleAssertion flag are:

"Refinement P T Q"    (assert P [T= Q  as declaration in a .csp file)
"Refinement P F Q"    (assert P [F= Q  as declaration in a .csp file)
"Refinement P FD Q"   (assert P [FD= Q as declaration in a .csp file)

2. Determinism Assertion:

'Determinism' followed by a Process P and a Model (F or FD). The two possible entries of determinism assertion 
for a process P after the -singleAssertion flag are:

"Determinism P F"      (assert P :[deterministic [F]]  as declaration in a .csp file)
"Determinism P FD"     (assert P :[deterministic [FD]] as declaration in a .csp file)

3. Deadlock Assertion:

'Deadlock' followed by a Process P and a Model (F or FD). The two possible entries of deadlock assertion 
for a process P after the -singleAssertion flag are:

"Deadlock P F"      (assert P :[deadlock free [F]]  as declaration in a .csp file)
"Deadlock P FD"     (assert P :[deadlock free [FD]] as declaration in a .csp file)

4. Livelock Assertion:

'Livelock' followed by a Process P. There is only one possible entry of P for this type of assertion after 
the -singleAssertion flag:

"Livelock P"      (assert P :[livelock free] as declaration in a .csp file)

After you specified the assertion that have to be checked, you have to type the file path of the Csp Specification ($src_file in the example above).

Turning off optimization options:

The Tcl file fdrBatch of the fdr2 program was modified to permit the user to turn off the optimizations "Supercompilation" and "Bisimulate leaves" from the command line in Batch mode. We use the following notations:

When we want to check a single assertion without the optimizations "Supercompilation" and "Bisimulate leaves" in Batch mode, we use the -singleAssertion flag with the same notation for the specific assertion as described above plus the new flags --turnoffSupercompilation and --turnoffBisim after the assertion term.

For instance, if we want to turn off the both of the optimizations for a assertion (e.g. P [F= Q) we have to type the following command:

fdr2  batch -singleAssetion "Refinement P F Q --turnoffSupercompilation --turnoffBisim" $csp_file

Respectively only one of them: 

fdr2  batch -singleAssetion "Refinement P F Q --turnoffBisim" $csp_file
or
fdr2  batch -singleAssetion "Refinement P F Q --turnoffSupercompilation" $csp_file

For checking all assertions in a cps file we have to use additionally the flag -turnoffOptions followed by the flags for turning off the optimizations mentioned above. For example if we want to turn both optimizations, we have to type following command:

fdr2 batch -turnoffOptions --turnoffSupercompilation --turnoffBisim $csp_file

Respectively only one of them:

fdr2 batch -turnoffOptions --turnoffBisim $csp_file
or
fdr2 batch -turnoffOptions --turnoffSupercompilation $csp_file
